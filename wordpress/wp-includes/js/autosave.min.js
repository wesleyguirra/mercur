window.autosave=function(){return!0},function(a,b){b.wp=b.wp||{},b.wp.autosave=function(){function c(b){var c,d,e,f=(new Date).getTime(),h=[],j=g();return j&&j.isDirty()&&!j.isHidden()&&f-3e3>i&&(j.save(),i=f),e={post_id:a("#post_ID").val()||0,post_type:a("#post_type").val()||"",post_author:a("#post_author").val()||"",post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""},"local"===b?e:(a('input[id^="in-category-"]:checked').each(function(){h.push(this.value)}),e.catslist=h.join(","),(c=a("#post_name").val())&&(e.post_name=c),(d=a("#parent_id").val())&&(e.parent_id=d),a("#comment_status").prop("checked")&&(e.comment_status="open"),a("#ping_status").prop("checked")&&(e.ping_status="open"),"1"===a("#auto_draft").val()&&(e.auto_draft="1"),e)}function d(b){return"object"==typeof b?(b.post_title||"")+"::"+(b.content||"")+"::"+(b.excerpt||""):(a("#title").val()||"")+"::"+(a("#content").val()||"")+"::"+(a("#excerpt").val()||"")}function e(){j.trigger("autosave-disable-buttons"),setTimeout(f,5e3)}function f(){j.trigger("autosave-enable-buttons")}function g(){return"undefined"!=typeof tinymce&&tinymce.get("content")}var h,i=0,j=a(document);return j.on("tinymce-editor-init.autosave",function(a,c){"content"===c.id&&b.setTimeout(function(){c.save(),h=d()},1e3)}).ready(function(){h=d()}),{getPostData:c,getCompareString:d,disableButtons:e,enableButtons:f,local:function(){function e(){var a=!1;return u&&s&&(a=sessionStorage.getItem("wp-autosave-"+s),a=a?JSON.parse(a):{}),a}function f(a){var b;return!(!u||!s)&&(b="wp-autosave-"+s,sessionStorage.setItem(b,JSON.stringify(a)),null!==sessionStorage.getItem(b))}function i(){var a=e();return!(!a||!t)&&(a["post_"+t]||!1)}function k(a){var b=e();if(!b||!t)return!1;if(a)b["post_"+t]=a;else{if(!b.hasOwnProperty("post_"+t))return!1;delete b["post_"+t]}return f(b)}function l(){x=!0}function m(){x=!1}function n(b){var e,f,g=!1;return!(x||!u)&&(b?(e=i()||{},a.extend(e,b)):e=c("local"),f=d(e),void 0===w&&(w=h),f!==w&&(e.save_time=(new Date).getTime(),e.status=a("#post_status").val()||"",g=k(e),g&&(w=f),g))}function o(){t=a("#post_ID").val()||0,a("#wp-content-wrap").hasClass("tmce-active")?j.on("tinymce-editor-init.autosave",function(){b.setTimeout(function(){q()},1500)}):q(),v=b.setInterval(n,15e3),a("form#post").on("submit.autosave-local",function(){var c=g(),d=a("#post_ID").val()||0;c&&!c.isHidden()?c.on("submit",function(){n({post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""})}):n({post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""});var e="https:"===b.location.protocol;wpCookies.set("wp-saving-post",d+"-check",86400,!1,!1,e)})}function p(a,b){function c(a){return a.toString().replace(/[\x20\t\r\n\f]+/g,"")}return c(a||"")===c(b||"")}function q(){var b,c,d,e,f=i(),g=wpCookies.get("wp-saving-post"),h=a("#has-newer-autosave").parent(".notice"),j=a(".wp-header-end");if(g===t+"-saved")return wpCookies.remove("wp-saving-post"),void k(!1);f&&(b=a("#content").val()||"",c=a("#title").val()||"",d=a("#excerpt").val()||"",p(b,f.content)&&p(c,f.post_title)&&p(d,f.excerpt)||(j.length||(j=a(".wrap h1, .wrap h2").first()),e=a("#local-storage-notice").insertAfter(j).addClass("notice-warning"),h.length?h.slideUp(150,function(){e.slideDown(150)}):e.slideDown(200),e.find(".restore-backup").on("click.autosave-local",function(){r(f),e.fadeTo(250,0,function(){e.slideUp(150)})})))}function r(b){var c;return!!b&&(w=d(b),a("#title").val()!==b.post_title&&a("#title").focus().val(b.post_title||""),a("#excerpt").val(b.excerpt||""),c=g(),c&&!c.isHidden()&&"undefined"!=typeof switchEditors?(c.settings.wpautop&&b.content&&(b.content=switchEditors.wpautop(b.content)),c.undoManager.transact(function(){c.setContent(b.content||""),c.nodeChanged()})):(a("#content-html").click(),a("#content").focus(),document.execCommand("selectAll"),document.execCommand("insertText",!1,b.content||"")),!0)}var s,t,u,v,w,x=!1;return s="undefined"!=typeof b.autosaveL10n&&b.autosaveL10n.blog_id,function(){var a=Math.random().toString(),c=!1;try{b.sessionStorage.setItem("wp-test",a),c=b.sessionStorage.getItem("wp-test")===a,b.sessionStorage.removeItem("wp-test")}catch(d){}return u=c,c}()&&s&&(a("#content").length||a("#excerpt").length)&&j.ready(o),{hasStorage:u,getSavedPostData:i,save:n,suspend:l,resume:m}}(),server:function(){function g(){q=!0,b.clearTimeout(r),r=b.setTimeout(function(){q=!1},1e4)}function i(){v=!0}function k(){v=!1}function l(b){p(),q=!1,t=s,s="",j.trigger("after-autosave",[b]),f(),b.success&&a("#auto_draft").val("")}function m(){u=0,wp.heartbeat.connectNow()}function n(){return d()!==h}function o(){var f,i;return!(v||q||!b.autosave())&&(!((new Date).getTime()<u)&&(f=c(),i=d(f),void 0===t&&(t=h),i!==t&&(s=i,g(),e(),j.trigger("wpcountwords",[f.content]).trigger("before-autosave",[f]),f._wpnonce=a("#_wpnonce").val()||"",f)))}function p(){u=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}var q,r,s,t,u=0,v=!1;return j.on("heartbeat-send.autosave",function(a,b){var c=o();c&&(b.wp_autosave=c)}).on("heartbeat-tick.autosave",function(a,b){b.wp_autosave&&l(b.wp_autosave)}).on("heartbeat-connection-lost.autosave",function(b,c,d){if("timeout"===c||603===d){var f=a("#lost-connection-notice");wp.autosave.local.hasStorage||f.find(".hide-if-no-sessionstorage").hide(),f.show(),e()}}).on("heartbeat-connection-restored.autosave",function(){a("#lost-connection-notice").hide(),f()}).ready(function(){p()}),{tempBlockSave:g,triggerSave:m,postChanged:n,suspend:i,resume:k}}()}}()}(jQuery,window);