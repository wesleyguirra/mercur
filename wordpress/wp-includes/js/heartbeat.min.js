!function(a,b,c){var d=function(){function d(){return(new Date).getTime()}function e(a){var c,d=a.src;if(d&&/^https?:\/\//.test(d)&&(c=b.location.origin?b.location.origin:b.location.protocol+"//"+b.location.host,0!==d.indexOf(c)))return!1;try{if(a.contentWindow.document)return!0}catch(e){}return!1}function f(){y.hasFocus&&!document.hasFocus()?k():!y.hasFocus&&document.hasFocus()&&l()}function g(a,b){var c;if(a){switch(a){case"abort":break;case"timeout":c=!0;break;case"error":if(503===b&&y.hasConnected){c=!0;break}case"parsererror":case"empty":case"unknown":y.errorcount++,y.errorcount>2&&y.hasConnected&&(c=!0)}c&&!p()&&(y.connectionError=!0,x.trigger("heartbeat-connection-lost",[a,b]))}}function h(){y.hasConnected=!0,p()&&(y.errorcount=0,y.connectionError=!1,x.trigger("heartbeat-connection-restored"))}function i(){var c,e;y.connecting||y.suspend||(y.lastTick=d(),e=a.extend({},y.queue),y.queue={},x.trigger("heartbeat-send",[e]),c={data:e,interval:y.tempInterval?y.tempInterval/1e3:y.mainInterval/1e3,_nonce:"object"==typeof b.heartbeatSettings?b.heartbeatSettings.nonce:"",action:"heartbeat",screen_id:y.screenId,has_focus:y.hasFocus},y.connecting=!0,y.xhr=a.ajax({url:y.url,type:"post",timeout:3e4,data:c,dataType:"json"}).always(function(){y.connecting=!1,j()}).done(function(a,b,c){var d;if(!a)return void g("empty");h(),a.nonces_expired&&x.trigger("heartbeat-nonces-expired"),a.heartbeat_interval&&(d=a.heartbeat_interval,delete a.heartbeat_interval),x.trigger("heartbeat-tick",[a,b,c]),d&&s(d)}).fail(function(a,b,c){g(b||"unknown",a.status),x.trigger("heartbeat-error",[a,b,c])}))}function j(){var a=d()-y.lastTick,c=y.mainInterval;y.suspend||(y.hasFocus?y.countdown>0&&y.tempInterval&&(c=y.tempInterval,--y.countdown<1&&(y.tempInterval=0)):c=12e4,y.minimalInterval&&c<y.minimalInterval&&(c=y.minimalInterval),b.clearTimeout(y.beatTimer),a<c?y.beatTimer=b.setTimeout(function(){i()},c-a):i())}function k(){y.hasFocus=!1}function l(){y.userActivity=d(),y.suspend=!1,y.hasFocus||(y.hasFocus=!0,j())}function m(){y.userActivityEvents=!1,x.off(".wp-heartbeat-active"),a("iframe").each(function(b,c){e(c)&&a(c.contentWindow).off(".wp-heartbeat-active")}),l()}function n(){var b=y.userActivity?d()-y.userActivity:0;b>3e5&&y.hasFocus&&k(),(y.suspendEnabled&&b>6e5||b>36e5)&&(y.suspend=!0),y.userActivityEvents||(x.on("mouseover.wp-heartbeat-active keyup.wp-heartbeat-active touchend.wp-heartbeat-active",function(){m()}),a("iframe").each(function(b,c){e(c)&&a(c.contentWindow).on("mouseover.wp-heartbeat-active keyup.wp-heartbeat-active touchend.wp-heartbeat-active",function(){m()})}),y.userActivityEvents=!0)}function o(){return y.hasFocus}function p(){return y.connectionError}function q(){y.lastTick=0,j()}function r(){y.suspendEnabled=!1}function s(a,b){var c,d=y.tempInterval?y.tempInterval:y.mainInterval;if(a){switch(a){case"fast":case 5:c=5e3;break;case 15:c=15e3;break;case 30:c=3e4;break;case 60:c=6e4;break;case 120:c=12e4;break;case"long-polling":return y.mainInterval=0,0;default:c=y.originalInterval}y.minimalInterval&&c<y.minimalInterval&&(c=y.minimalInterval),5e3===c?(b=parseInt(b,10)||30,b=b<1||b>30?30:b,y.countdown=b,y.tempInterval=c):(y.countdown=0,y.tempInterval=0,y.mainInterval=c),c!==d&&j()}return y.tempInterval?y.tempInterval/1e3:y.mainInterval/1e3}function t(a,b,c){return!!a&&((!c||!this.isQueued(a))&&(y.queue[a]=b,!0))}function u(a){if(a)return y.queue.hasOwnProperty(a)}function v(a){a&&delete y.queue[a]}function w(a){if(a)return this.isQueued(a)?y.queue[a]:c}var x=a(document),y={suspend:!1,suspendEnabled:!0,screenId:"",url:"",lastTick:0,queue:{},mainInterval:60,tempInterval:0,originalInterval:0,minimalInterval:0,countdown:0,connecting:!1,connectionError:!1,errorcount:0,hasConnected:!1,hasFocus:!0,userActivity:0,userActivityEvents:!1,checkFocusTimer:0,beatTimer:0};return function(){var c,e,g,h;"string"==typeof b.pagenow&&(y.screenId=b.pagenow),"string"==typeof b.ajaxurl&&(y.url=b.ajaxurl),"object"==typeof b.heartbeatSettings&&(c=b.heartbeatSettings,!y.url&&c.ajaxurl&&(y.url=c.ajaxurl),c.interval&&(y.mainInterval=c.interval,y.mainInterval<15?y.mainInterval=15:y.mainInterval>120&&(y.mainInterval=120)),c.minimalInterval&&(c.minimalInterval=parseInt(c.minimalInterval,10),y.minimalInterval=c.minimalInterval>0&&c.minimalInterval<=600?1e3*c.minimalInterval:0),y.minimalInterval&&y.mainInterval<y.minimalInterval&&(y.mainInterval=y.minimalInterval),y.screenId||(y.screenId=c.screenId||"front"),"disable"===c.suspension&&(y.suspendEnabled=!1)),y.mainInterval=1e3*y.mainInterval,y.originalInterval=y.mainInterval,"undefined"!=typeof document.hidden?(e="hidden",h="visibilitychange",g="visibilityState"):"undefined"!=typeof document.msHidden?(e="msHidden",h="msvisibilitychange",g="msVisibilityState"):"undefined"!=typeof document.webkitHidden&&(e="webkitHidden",h="webkitvisibilitychange",g="webkitVisibilityState"),e&&(document[e]&&(y.hasFocus=!1),x.on(h+".wp-heartbeat",function(){"hidden"===document[g]?(k(),b.clearInterval(y.checkFocusTimer)):(l(),document.hasFocus&&(y.checkFocusTimer=b.setInterval(f,1e4)))})),document.hasFocus&&(y.checkFocusTimer=b.setInterval(f,1e4)),a(b).on("unload.wp-heartbeat",function(){y.suspend=!0,y.xhr&&4!==y.xhr.readyState&&y.xhr.abort()}),b.setInterval(n,3e4),x.ready(function(){y.lastTick=d(),j()})}(),{hasFocus:o,connectNow:q,disableSuspend:r,interval:s,hasConnectionError:p,enqueue:t,dequeue:v,isQueued:u,getQueuedItem:w}};b.wp=b.wp||{},b.wp.heartbeat=new d}(jQuery,window);